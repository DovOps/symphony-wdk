name: my-proposal
version: 0
variables:
  roomName: "Best room ever"
  sendMessageActivityId: "send-message-id-1"
activities:
  - create-room: #has as output {"streamId": "AbcDEFgHiJK"}
      id: "create-room-id-1"
      description: "activity to create room when receiving /create-room slash command"
      on:
        message:
          content: "/create-room"
      name: "room testing create-room"  #optional if uids is set
      uids: #optional if name is set
        - 13056700579871
        - 13056700582923
        - 13056700579841
        - 13056700581149
      room-description: "this is room description"
      public: true

  - send-message: #has as output {"messageId": "LmNOpqrStUVw"}
      id: "send-message-id-1"
      description: "activity to send simple message"
      to:
        stream-id: "AbFHu_blQ-qrU__t"
      content: |
        <messageML>
          <p>Hello people in $global.$roomName .</p>
        </messageML>

  - send-message: #has as output {"messageId": "JKlmNopqrStU"}
      id: "send-message-id-2"
      description: "activity to send a message when a user join the room"
      on:
        user-joined:
          stream-id: "streamIdID"
      to:
        stream-id: "streamIdID"
      content: <messageML><p>Welcome joining user!</p></messageML>
