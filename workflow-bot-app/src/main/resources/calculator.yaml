name: calculator
activities:
  - on:
      message-received: calculator
    reply: |
      <messageML>
          <h2>calculator</h2>
          <card accent="tempo-bg-color--blue"
                iconSrc="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Calculator_icon.svg/512px-Calculator_icon.svg.png">
              <header>
                  <form id="PROCESS_ID">
                      <text-field name="left" placeholder=""/>
                      <select name="operator">
                          <option selected="true" value="+">+</option>
                          <option value="-">-</option>
                          <option value="*">*</option>
                          <option value="/">/</option>
                      </select>
                      <text-field name="right" placeholder=""/>
                      <button name="send-answers" type="action">Calculate!</button>
                  </form>
              </header>
          </card>
      </messageML>

  - on:
      formReply: send-answers
    script: |
      left = left as Integer
      right = right as Integer
      switch(operator) {
        case "+": result = left + right; break;
        case "-": result = left - right; break;
        case "*": result = left * right; break;
        case "/": result = left / right; break;
      }
      execution.setVariable("RESULT", result)

  - reply: |
      <messageML>
          <card accent="tempo-bg-color--blue" iconSrc="https://upload.wikimedia.org/wikipedia/commons/thumb/1/1e/Calculator_icon.svg/512px-Calculator_icon.svg.png">
              <header>
                  Result = <b>RESULT</b>
              </header>
          </card>
      </messageML>

