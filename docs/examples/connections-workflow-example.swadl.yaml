name: example-connections-workflow
variables:
  userid: PUT_A_USER_ID
activities:
  - create-connection:
      id: createconnection
      description: "Create a connection request with user provided in variables"
      on:
        message-received:
          content: /start
      user-id: ${variables.userid}
  - get-connection:
      id: getconnection1
      description: "Cet connection's status"
      user-id: ${variables.userid}
  - execute-script:
      id: assertscript
      description: "Check connection status is pending outgoing"
      script: |
        println getconnection1.outputs.connection.status
        assert getconnection1.outputs.connection.status.getValue() == "PENDING_OUTGOING"
  - get-connection:
      id: getconnection2
      description: "Cet connection's status after being accepted by user"
      on:
        message-received:
          content: /resume
      user-id: ${variables.userid}
  - execute-script:
      id: assertscript
      description: "Check connection status is pending outgoing"
      script: |
        println getconnection1.outputs.connection.status
        assert getconnection1.outputs.connection.status.getValue() == "ACCEPTED"
